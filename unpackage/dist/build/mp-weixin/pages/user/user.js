(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/user/user"],{"0453":function(e,t,n){"use strict";(function(e){n("b186");o(n("66fd"));var t=o(n("9d58"));function o(e){return e&&e.__esModule?e:{default:e}}wx.__webpack_require_UNI_MP_PLUGIN__=n,e(t.default)}).call(this,n("543d")["createPage"])},"06fa":function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=r(n("2054")),i=(r(n("8a50")),r(n("a152")));function r(e){return e&&e.__esModule?e:{default:e}}function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){s(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var u={mixins:[o.default],name:"Mine",data:function(){return{user:{avatar:""},userInfo:{},isLogin:!1,baseUrl:"http://bufantec.com",gridList:[{url:"/pages/user/collected/collected",img:"../../static/icons/save.png",text:"商品收藏"},{url:"",img:"../../static/icons/brand.png",text:"品牌"},{url:"/pages/user/articleList/articleList",img:"../../static/icons/article.png",text:"文章收藏"},{url:"./address/address",img:"../../static/icons/address.png",text:"地址"},{url:"",img:"../../static/icons/card.png",text:"卡包"},{url:"/pages/user/car/car",img:"/static/icons/cart2.png",text:"购物车"}]}},onShow:function(){this.checkHasLogined()?this.init():(console.log(1111111),this.userInfo={})},methods:{goPay:function(){var t=this,n="https://bufan.cloud";e.login({provider:"weixin",success:function(o){var i=o.code;i&&e.request({url:"".concat(n,"/wxlite/user/getUserInfo?appid=wx533999245c2a4823&code=").concat(i),method:"get",success:function(o){var i=o.data.data.openid;e.request({url:"".concat(n,"/wxlite/pay/orderPay?openid=").concat(i,"&total_fee=1"),success:function(e){console.log(e);var n=e.data.data;t.uniPay(n)}})}})}})},uniPay:function(t){e.requestPayment(a(a({provider:"wxpay"},t),{},{success:function(e){console.log("success:"+JSON.stringify(e))},fail:function(e){console.log("fail:"+JSON.stringify(e))}}))},save:function(){e.request({url:this.baseUrl+"/wx/liteDev/register",data:{appId:"wx533999245c2a4823",appSecret:""},success:function(t){console.log(t),"success"==t.data.code?e.showToast({title:"保存成功",icon:"none"}):e.showToast({title:"保存失败,请检查appid及appsecret是否正确!"})}})},decryptPhoneNumber:function(t){var n=this,o="wx533999245c2a4823",r="",c=t.detail.encryptedData,a=t.detail.iv;wx.login({success:function(t){wx.request({url:n.baseUrl+"/admin/xy/lite/student/doLogin",data:{code:t.code,appid:o},success:function(t){r=t.data.data.session_key;var n=new i.default(o,r),s=n.decryptData(c,a);e.showToast({title:"获取到的手机号为\n\t\t\t\t\t\t\t\t".concat(s.phoneNumber),icon:"none",duration:3e3})}})}})},fingerPrint:function(){e.startSoterAuthentication({requestAuthModes:["fingerPrint"],authContent:"测试指纹识别",challenge:"1",success:function(e){console.log(e)},fail:function(e){console.log(e)}})},tel:function(){e.makePhoneCall({phoneNumber:"18838180363"})},getUserInfo:function(){var t=this;e.getProvider({service:"oauth",success:function(n){n.provider.includes("weixin")&&e.login({provider:"weixin",success:function(n){e.getUserInfo({provider:"weixin",withCredentials:!0,lang:"zh_CN",success:function(e){console.log("获取的个人信息为",JSON.stringify(e)),t.userInfo.nickname=e.userInfo.nickName,t.userInfo.icon=e.userInfo.avatarUrl},fail:function(t){e.showToast({title:"获取个人信息失败",icon:"none"})}})},fail:function(t){console.log("失败",JSON.stringify(t)),e.showModal({title:"失败",content:JSON.stringify(t)})}})}})},init:function(){var t=e.getStorageSync("leju_user");console.log(t),this.userInfo=t},navigateTo:function(t,n){t?e.navigateTo({url:t}):e.showToast({image:"/static/icons/sorry.png",title:n+"功能暂未开通 !"})},goUserCenter:function(){e.navigateTo({url:"./updateUserInfo/updateUserInfo"})}}};t.default=u}).call(this,n("543d")["default"])},"097b":function(e,t,n){"use strict";n.r(t);var o=n("06fa"),i=n.n(o);for(var r in o)"default"!==r&&function(e){n.d(t,e,(function(){return o[e]}))}(r);t["default"]=i.a},"6b62":function(e,t,n){},"9d58":function(e,t,n){"use strict";n.r(t);var o=n("d6dd"),i=n("097b");for(var r in i)"default"!==r&&function(e){n.d(t,e,(function(){return i[e]}))}(r);n("af2a");var c,a=n("f0c5"),s=Object(a["a"])(i["default"],o["b"],o["c"],!1,null,"159dddcc",null,!1,o["a"],c);t["default"]=s.exports},af2a:function(e,t,n){"use strict";var o=n("6b62"),i=n.n(o);i.a},d6dd:function(e,t,n){"use strict";var o;n.d(t,"b",(function(){return i})),n.d(t,"c",(function(){return r})),n.d(t,"a",(function(){return o}));var i=function(){var e=this,t=e.$createElement;e._self._c},r=[]}},[["0453","common/runtime","common/vendor"]]]);